# 并发(信号,线程)
同步
异步

异步事件的处理:查询法通知法

一.信号
1.信号的概念:信号是软件中断
信号的响应依赖于中断


2.signal()
kill -l
p199

typedef void (*sighandler_t)(int);
sighandler_t signal(int signum, sighandler_t handler);
equal to
void (*signal(int signum,void (*func)(int)))(int);

*信号会打断阻塞的系统调用

3.信号的不可靠
    内核帮忙布置执行现场,有可能第一个信号的动作还没结束,就来了第二个信号


4.可重入函数
    所有的系统调用都是可重入的,一部分库函数也是可重入的,如:memcpy,部分以_r结尾的函数

5.信号的响应过程
信号屏蔽字mask(全1) panding(全0) 位图
信号从收到到响应有一个不可避免的延迟
思考:如何忽略掉一个信号
    标准信号为什么要丢失
    标准信号的响应没有严格的顺序

`在程序运行时间片耗尽时，被内核的中断机制打断时，程序保存当前的执行现场，进入到内核态的就绪队列等待就绪，当再次获取时间片时，从内核态回到用户态期间程序会将mask位图 按位与上 pending位图来判断是否接收到信号，当没有信号时，位图结果为0，表示没有收到信号，程序回到之前的执行现场继续执行。程序当收到信号时，对应的信号结果为1，程序执行对应的信号处理函数，此时对应的mask位和pending位均置为0，当执行完信号处理函数后，将对应的mask位置为1，如果时间片没有耗尽就回到用户态执行之前任务的位置，否则进入就绪队列等待调度。`


6.常用函数
    kill();
    raise();
    alarm();
    pause();
    abort();

7.

